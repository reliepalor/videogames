<aside
  class="fixed left-0 top-0 h-full bg-white border-r border-gray-200 shadow-lg transition-all duration-300 z-40 flex flex-col"
  [class.w-64]="!isMinimized"
  [class.w-20]="isMinimized"
>

  <!-- HEADER -->
  <div
    class="flex items-center p-4 border-b border-gray-200 transition-all"
    [class.justify-center]="isMinimized"
  >

    <!-- LOGO ICON (SVG instead of emoji) -->
    <svg 
      class="w-7 h-7 text-purple-600 flex-shrink-0"
      viewBox="0 0 24 24" 
      fill="none" 
      stroke="currentColor" 
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M6 12h2m4-4v2m0 4v2m4-4h2M7 17l2-2h6l2 2M5 7h14a2 2 0 0 1 2 2v6a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5V9a2 2 0 0 1 2-2z"
      />
    </svg>

    <!-- TITLE -->
    <p 
      class="font-semibold ml-3 truncate text-gray-900" 
      [class.hidden]="isMinimized"
    >
      Video Games
    </p>

    <!-- SIDEBAR TOGGLE BUTTON -->
    <button
      (click)="toggleSidebar()"
      class="p-2 rounded-lg hover:bg-gray-100 transition"
      [ngClass]="isMinimized ? '' : 'ml-auto'"
    >
      <svg 
        class="w-5 h-5 text-gray-600 transition-transform duration-200"
        fill="none" 
        stroke="currentColor" 
        stroke-width="2"
        stroke-linecap="round" 
        stroke-linejoin="round"
        [class.rotate-180]="isMinimized"
      >
        <path d="M15 19l-7-7 7-7" />
      </svg>
    </button>
  </div>


  <!-- NAVIGATION -->
  <nav class="flex flex-col p-3 space-y-2 overflow-x-hidden">

    <!-- DASHBOARD -->
    <a
      routerLink="/dashboard"
      routerLinkActive="bg-purple-100 text-purple-700 border-l-4 border-purple-600"
      [routerLinkActiveOptions]="{ exact: true }"
      class="flex items-center p-3 rounded-xl font-medium text-gray-700 hover:bg-purple-50 transition-all"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span class="text-xl">ðŸ“Š</span>
      <span class="truncate" [class.hidden]="isMinimized">Dashboard</span>
    </a>

    <!-- GAMES -->
    <a
      routerLink="/videogames"
      routerLinkActive="bg-purple-100 text-purple-700 border-l-4 border-purple-600"
      [routerLinkActiveOptions]="{ exact: true }"
      class="flex items-center p-3 rounded-xl font-medium text-gray-700 hover:bg-purple-50 transition-all"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span class="text-xl">ðŸŽ®</span>
      <span class="truncate" [class.hidden]="isMinimized">Games</span>
    </a>

    <!-- ADD GAME -->
    <a
      routerLink="/videogames/new"
      routerLinkActive="bg-purple-100 text-purple-700 border-l-4 border-purple-600"
      [routerLinkActiveOptions]="{ exact: true }"
      class="flex items-center p-3 rounded-xl font-medium text-gray-700 hover:bg-purple-50 transition-all"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span class="text-xl">âž•</span>
      <span class="truncate" [class.hidden]="isMinimized">Add Game</span>
    </a>

    <!-- ORDERS -->
    <a
      routerLink="/admin/orders"
      routerLinkActive="bg-purple-100 text-purple-700 border-l-4 border-purple-600"
      [routerLinkActiveOptions]="{ exact: true }"
      class="flex items-center p-3 rounded-xl font-medium text-gray-700 hover:bg-purple-50 transition-all"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span class="text-xl">ðŸ“¦</span>
      <span class="truncate" [class.hidden]="isMinimized">Orders</span>
    </a>

  </nav>

  <!-- USER PANEL -->
  <div
    class="mt-auto p-4 border-t border-gray-200 relative"
    *ngIf="user$ | async as user"
  >
    <button
      (click)="toggleDropdown()"
      class="flex items-center w-full p-3 rounded-xl hover:bg-purple-50 transition-all duration-200 text-gray-700"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <!-- Avatar -->
      <div class="w-10 h-10 rounded-full bg-purple-200 flex items-center justify-center text-lg font-bold text-purple-700 shadow-inner">
        {{ (user.username || user.email || '')[0] | uppercase }}
      </div>

      <!-- User Info -->
      <div class="flex-1" [class.hidden]="isMinimized">
        <div class="font-semibold text-gray-900 truncate">{{ user.username }}</div>
        <div class="text-xs text-gray-500 truncate">{{ user.email }}</div>
      </div>

      <!-- Arrow Icon -->
      <svg
        *ngIf="!isMinimized"
        class="w-5 h-5 text-gray-500 transition-transform duration-200"
        [class.rotate-180]="isDropdownOpen"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M6 9l6 6 6-6" />
      </svg>
    </button>

    <!-- DROPDOWN MENU -->
    <div
      *ngIf="isDropdownOpen && !isMinimized"
      class="absolute left-4 right-4 bottom-16 bg-white border border-gray-200 rounded-2xl shadow-lg z-50 
            animate-[fadeIn_0.2s_ease-out] overflow-hidden backdrop-blur-md"
    >
      <!-- Profile -->
      <a
        routerLink="/"
        class="flex items-center gap-3 px-4 py-3 hover:bg-purple-50 text-gray-700 transition rounded-xl"
        (click)="closeDropdown()"
      >
        <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-4 0-7 2-7 4v1h14v-1c0-2-3-4-7-4z" />
        </svg>
        <span>Profile</span>
      </a>

      <!-- Change Password -->
      <a
        routerLink="/settings/password"
        class="flex items-center gap-3 px-4 py-3 hover:bg-purple-50 text-gray-700 transition rounded-xl"
      >
        <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 17c1.7 0 3-1.3 3-3V9c0-3.3-2.7-6-6-6S3 5.7 3 9v5c0 1.7 1.3 3 3 3h6zM9 21h6" />
        </svg>
        <span>Change Password</span>
      </a>

      <!-- Logout -->
      <button
        (click)="logout()"
        class="flex items-center gap-3 w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 transition rounded-xl"
      >
        <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 3h4v18h-4M10 17l5-5-5-5M15 12H3" />
        </svg>
        <span>Logout</span>
      </button>
    </div>
  </div>


</aside>

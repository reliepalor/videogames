<aside
  class="fixed left-0 top-0 h-full bg-white border-r border-gray-200 shadow-lg transition-all duration-300 z-40 flex flex-col"
  [class.w-64]="!isMinimized"
  [class.w-20]="isMinimized"
>

  <!-- HEADER -->
  <div
    class="flex items-center p-4 border-b border-gray-200"
    [class.justify-center]="isMinimized"
  >
    <span class="text-3xl flex-shrink-0">ğŸ®</span>

    <p class="font-semibold ml-3 truncate" [class.hidden]="isMinimized">
      Video
    </p>

    <button
      (click)="toggleSidebar()"
      class="p-2 rounded-lg hover:bg-gray-100 transition ml-auto"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          [attr.d]="isMinimized ? 'M9 5l7 7-7 7' : 'M15 19l-7-7 7-7'"
        />
      </svg>
    </button>
  </div>

  <!-- NAVIGATION -->
  <nav class="flex flex-col p-3 space-y-2 overflow-x-hidden">

    <!-- DASHBOARD -->
    <a
      routerLink="/dashboard"
      routerLinkActive="bg-blue-100 text-blue-700"
      class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span>ğŸ“Š</span>
      <span class="truncate" [class.hidden]="isMinimized">Dashboard</span>
    </a>

    <!-- GAMES -->
    <a
      routerLink="/videogames"
      routerLinkActive="bg-blue-100 text-blue-700"
      class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span>ğŸ®</span>
      <span class="truncate" [class.hidden]="isMinimized">Games</span>
    </a>

    <!-- ADD GAME -->
    <a
      routerLink="/videogames/new"
      routerLinkActive="bg-blue-100 text-blue-700"
      class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span>â•</span>
      <span class="truncate" [class.hidden]="isMinimized">Add Game</span>
    </a>

    <!-- ORDERS -->
    <a
      routerLink="/admin/orders"
      routerLinkActive="bg-blue-100 text-blue-700"
      class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
    >
      <span>ğŸ“¦</span>
      <span class="truncate" [class.hidden]="isMinimized">Orders</span>
    </a>

  </nav>

  <!-- USER SECTION -->
  <div
    class="mt-auto p-4 border-t border-gray-200 relative"
    *ngIf="user$ | async as user"
  >
    <button
      (click)="toggleDropdown()"
      [ngClass]="isMinimized ? 'justify-center' : 'gap-3'"
      class="flex items-center w-full p-2 rounded-lg hover:bg-gray-100 transition"
    >
      <div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-lg font-bold">
        {{ (user.username || user.email || '')[0] | uppercase }}
      </div>

      <div class="flex-1" [class.hidden]="isMinimized">
        <div class="font-medium truncate">Admin</div>
        <div class="text-xs text-gray-500 truncate">{{ user.email }}</div>
      </div>

      <span [class.hidden]="isMinimized">v</span>
    </button>

    <!-- DROPDOWN -->
    <div
      *ngIf="isDropdownOpen && !isMinimized"
      class="absolute left-4 right-4 bottom-16 bg-white border border-gray-200 rounded-lg shadow-xl z-50"
    >
      <a
        routerLink="/profile"
        class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 text-sm text-gray-700"
        (click)="closeDropdown()"
      >
        ğŸ‘¤ <span>Profile</span>
      </a>
      <a
        routerLink="/settings/password"
        class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100"
      >
        ğŸ” Change Password
      </a>
      <button
        (click)="logout()"
        class="flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"
      >
        ğŸšª <span>Logout</span>
      </button>
    </div>
  </div>
</aside>
